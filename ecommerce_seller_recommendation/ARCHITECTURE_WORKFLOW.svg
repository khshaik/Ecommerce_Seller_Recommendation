<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerUnits="strokeWidth"
      markerWidth="10" markerHeight="8" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2b6cb0" />
    </marker>
    <style>
      .box { fill: #edf2f7; stroke: #2b6cb0; stroke-width: 2; rx: 6; }
      .title { font: bold 14px sans-serif; fill: #2b6cb0; }
      .label { font: 12px sans-serif; fill: #1a202c; }
      .note { font: italic 11px sans-serif; fill: #4a5568; }
    </style>
  </defs>

  <!-- Title -->
  <text x="40" y="30" class="title">Ecommerce Seller Recommendation — Architecture &amp; Workflow</text>

  <!-- Ingestion -->
  <rect x="40" y="60" width="220" height="70" class="box" />
  <text x="60" y="85" class="label">Sources / Ingestion</text>
  <text x="60" y="104" class="note">CSV / JSON (local or S3)</text>

  <!-- Bronze -->
  <rect x="320" y="60" width="220" height="70" class="box" />
  <text x="340" y="85" class="label">Bronze (Raw Snapshot)</text>
  <text x="340" y="104" class="note">Immutable snapshots for audit</text>

  <!-- DQ -->
  <rect x="600" y="60" width="220" height="70" class="box" />
  <text x="620" y="85" class="label">DQ &amp; Preprocessing</text>
  <text x="620" y="104" class="note">Validation, normalization, quarantine</text>

  <!-- Silver -->
  <rect x="40" y="180" width="300" height="90" class="box" />
  <text x="60" y="205" class="label">Silver — Transactional Store</text>
  <text x="60" y="224" class="note">Apache Hudi (upserts, incremental reads)</text>

  <!-- Gold -->
  <rect x="420" y="180" width="320" height="90" class="box" />
  <text x="440" y="205" class="label">Gold — Aggregates / Recommendations</text>
  <text x="440" y="224" class="note">Seller-level features, rankings, export</text>

  <!-- Control + Logs -->
  <rect x="770" y="300" width="300" height="70" class="box" />
  <text x="790" y="325" class="label">Control / Metadata</text>
  <text x="790" y="344" class="note">State table, run metadata, logs</text>

  <!-- Consumers -->
  <rect x="420" y="320" width="300" height="70" class="box" />
  <text x="440" y="345" class="label">Consumers</text>
  <text x="440" y="364" class="note">Dashboards, API, Reports</text>

  <!-- Arrows: Ingestion -> Bronze -> DQ -> Silver -> Gold -> Consumers -->
  <line x1="260" y1="95" x2="320" y2="95" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />
  <line x1="540" y1="95" x2="600" y2="95" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />

  <line x1="200" y1="150" x2="200" y2="180" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />
  <line x1="340" y1="225" x2="420" y2="225" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />
  <line x1="740" y1="225" x2="740" y2="320" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />
  <line x1="740" y1="225" x2="740" y2="320" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />

  <line x1="740" y1="225" x2="740" y2="320" stroke-opacity="0" />

  <!-- From Silver to Gold -->
  <line x1="340" y1="230" x2="420" y2="230" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />

  <!-- From Gold to Consumers and Control -->
  <line x1="740" y1="230" x2="770" y2="345" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />
  <line x1="740" y1="260" x2="440" y2="345" stroke="#2b6cb0" stroke-width="3" marker-end="url(#arrow)" />

  <!-- Quarantine flow -->
  <rect x="40" y="300" width="300" height="70" class="box" />
  <text x="60" y="325" class="label">Quarantine / Reprocess</text>
  <text x="60" y="344" class="note">Invalid rows for inspection</text>
  <line x1="600" y1="125" x2="340" y2="300" stroke="#e53e3e" stroke-width="2" marker-end="url(#arrow)" />
  <text x="420" y="120" class="note">Invalid rows -> Quarantine</text>

  <!-- Legend -->
  <rect x="40" y="400" width="1030" height="230" fill="#f7fafc" stroke="#cbd5e1" rx="6" />
  <text x="60" y="430" class="label">Legend</text>
  <text x="60" y="452" class="note">- Bronze: raw immutable snapshots</text>
  <text x="60" y="470" class="note">- Silver (Hudi): cleaned, transactional store (upserts + incremental)</text>
  <text x="60" y="488" class="note">- Gold: business aggregates & recommendation outputs</text>
  <text x="60" y="506" class="note">- Quarantine: invalid rows for reprocessing / audit</text>

</svg>